Homework 2
================
Sarahy Martinez
09-29-2024

Libraries Used for this HW

``` r
library(tidyverse)
library(tidyr)
library(readxl)
```

## Problem 1

``` r
 NYC_transit =
  read_csv("./data/NYC_Transit_Subway_Entrance_AND_EXIT_DATA.csv", na = c("NA", ".", "")) %>% 
  janitor::clean_names() %>% 
  relocate(line:entry, ada,vending) %>% 
  select(-division:-entrance_location, station_location) %>% 
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE)) %>% 
  mutate(vending = ifelse(vending == "YES", TRUE, FALSE)) %>% 
  mutate(across(starts_with("route"), as.character)) %>% 
  pivot_longer(
    route1:route11,
    names_to = "route_number",
    values_to = "route_name",
  ) %>% 
  relocate(station_name,station_location,route_number, route_name,line,entrance_type, entry, ada,vending)
```

This dataset contains the variables station name, station location,
train route number, routes,line, entrance type, entry, exit only,
vending, ada, station lat, and station long. I cleaned my data by using
clean names to fix the variable names, relocated the order of my
variables for legibility, selected my columns/ data of interest, mutated
the character variables from entry to logical, mutates the names of the
routes as characters because it wasn’t allowing me to run the pivot
function , then used the pivot_longer to tidy the data and combine route
numbers to one column and assign the routes their own column with the
station, and relocated again for legibility. Data is now tidy.

``` r
count(distinct(NYC_transit, station_name,line))
```

    ## # A tibble: 1 × 1
    ##       n
    ##   <int>
    ## 1   465

``` r
transit_entry = 
  NYC_transit %>% 
  filter(ada == TRUE) %>% 
  select(station_name, line) %>% 
  distinct()

transit_entry = NYC_transit %>% 
  filter( vending == "FALSE") %>% 
  pull(entry) %>% 
  mean()

A_train =
  NYC_transit %>% 
  filter(route_name == "A") %>% 
  distinct(station_name, line) 
nrow(A_train)
```

    ## [1] 60

``` r
A_train_ada =
  NYC_transit %>% 
  filter(route_name == "A", ada== TRUE) %>% 
  distinct(station_name, line) 
nrow(A_train_ada)
```

    ## [1] 17

- There are 465 distinct stations.
- There are 84 stations that are ADA compliant.
- There proportion of entrances/ exits without vending that allow
  entrance, is 0.377.
- There are 60 stations that serve the A train, and 17 are ADA
  compliant.

## Probem 2

Importing and reading the dataset

``` r
mister_wheel_data = read_excel("./data/202309 Trash Wheel Collection Data.xlsx", 
                               sheet=1,
                               skip = 1,
                               range= "A2:N586",
                               na = c("NA", ".", "")) %>% 
                            janitor::clean_names() %>% 
                            mutate(sports_balls = as.integer(round(sports_balls))) %>% 
                            mutate(year = as.numeric(year)) %>% 
                            mutate(trash = "mister_trash") %>% 
                            na.omit()
```

``` r
professor_trash = read_excel("./data/202309 Trash Wheel Collection Data.xlsx", 
                               sheet=2,
                               skip = 1,
                               range= "A2:M108",
                               na = c("NA", ".", "")) %>% 
                            janitor::clean_names() %>% 
                            mutate(year = as.numeric(year)) %>% 
                            mutate(trash = "professor_trash") %>% 
                            na.omit()
```

``` r
gwynnda_trash = read_excel("./data/202309 Trash Wheel Collection Data.xlsx", 
                               sheet=4,
                               skip = 1,
                               range= "A2:L157",
                               na = c("NA", ".", "")) %>% 
                            janitor::clean_names() %>% 
                            mutate(year = as.numeric(year)) %>% 
                            mutate(trash = "gwynnda_trash") %>% 
                            na.omit()
```

``` r
trash_wheel_tidy = 
  bind_rows(professor_trash, gwynnda_trash, mister_wheel_data) %>% 
  janitor::clean_names() 

nrow(trash_wheel_tidy)
```

    ## [1] 725

``` r
ncol(trash_wheel_tidy)
```

    ## [1] 15

``` r
summary(trash_wheel_tidy)
```

    ##     dumpster        month                year     
    ##  Min.   :  1.0   Length:725         Min.   :2014  
    ##  1st Qu.: 91.0   Class :character   1st Qu.:2017  
    ##  Median :222.0   Mode  :character   Median :2019  
    ##  Mean   :250.1                      Mean   :2019  
    ##  3rd Qu.:403.0                      3rd Qu.:2021  
    ##  Max.   :584.0                      Max.   :2023  
    ##                                                   
    ##       date                         weight_tons    volume_cubic_yards
    ##  Min.   :1900-01-20 00:00:00.00   Min.   :0.610   Min.   : 6.00     
    ##  1st Qu.:2017-04-01 00:00:00.00   1st Qu.:2.480   1st Qu.:15.00     
    ##  Median :2019-03-05 00:00:00.00   Median :3.070   Median :15.00     
    ##  Mean   :2018-12-24 19:29:52.54   Mean   :3.025   Mean   :15.18     
    ##  3rd Qu.:2021-05-28 00:00:00.00   3rd Qu.:3.580   3rd Qu.:15.00     
    ##  Max.   :2023-06-30 00:00:00.00   Max.   :5.620   Max.   :20.00     
    ##                                                                     
    ##  plastic_bottles  polystyrene    cigarette_butts  glass_bottles   
    ##  Min.   : 210    Min.   :    5   Min.   :   800   Min.   :  0.00  
    ##  1st Qu.:1130    1st Qu.:  480   1st Qu.:  3900   1st Qu.: 10.00  
    ##  Median :2100    Median : 1190   Median :  6800   Median : 18.00  
    ##  Mean   :2448    Mean   : 1871   Mean   : 17773   Mean   : 20.83  
    ##  3rd Qu.:3100    3rd Qu.: 2670   3rd Qu.: 21000   3rd Qu.: 28.00  
    ##  Max.   :9830    Max.   :11528   Max.   :310000   Max.   :110.00  
    ##                                                   NA's   :38      
    ##   plastic_bags      wrappers     homes_powered      trash          
    ##  Min.   :   24   Min.   :  180   Min.   : 0.00   Length:725        
    ##  1st Qu.:  280   1st Qu.:  840   1st Qu.:37.17   Class :character  
    ##  Median :  660   Median : 1360   Median :49.17   Mode  :character  
    ##  Mean   : 1098   Mean   : 2328   Mean   :45.40                     
    ##  3rd Qu.: 1360   3rd Qu.: 2630   3rd Qu.:57.67                     
    ##  Max.   :13450   Max.   :20100   Max.   :93.67                     
    ##                                                                    
    ##   sports_balls  
    ##  Min.   : 0.00  
    ##  1st Qu.: 6.00  
    ##  Median :11.00  
    ##  Mean   :13.17  
    ##  3rd Qu.:18.25  
    ##  Max.   :56.00  
    ##  NA's   :141

``` r
rowSums(is.na(trash_wheel_tidy))
```

    ##   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
    ##  [38] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
    ##  [75] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2
    ## [112] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 0 0 0 0 0 0 0
    ## [149] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [186] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [223] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [260] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [297] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [334] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [371] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [408] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [445] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [482] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [519] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [556] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [593] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [630] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [667] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    ## [704] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

``` r
# with na.omit 

trash_wheel_tidy_omit =
   bind_rows(professor_trash, gwynnda_trash, mister_wheel_data) %>% 
  janitor::clean_names() %>% 
  drop_na()
  
nrow(trash_wheel_tidy_omit)
```

    ## [1] 584

``` r
ncol(trash_wheel_tidy_omit)
```

    ## [1] 15

``` r
summary(trash_wheel_tidy_omit)
```

    ##     dumpster        month                year     
    ##  Min.   :  1.0   Length:584         Min.   :2014  
    ##  1st Qu.:146.8   Class :character   1st Qu.:2016  
    ##  Median :292.5   Mode  :character   Median :2018  
    ##  Mean   :292.5                      Mean   :2018  
    ##  3rd Qu.:438.2                      3rd Qu.:2020  
    ##  Max.   :584.0                      Max.   :2023  
    ##       date                         weight_tons    volume_cubic_yards
    ##  Min.   :1900-01-20 00:00:00.00   Min.   :0.780   Min.   : 7.0      
    ##  1st Qu.:2016-07-28 18:00:00.00   1st Qu.:2.720   1st Qu.:15.0      
    ##  Median :2018-09-01 00:00:00.00   Median :3.195   Median :15.0      
    ##  Mean   :2018-07-23 03:36:59.18   Mean   :3.211   Mean   :15.3      
    ##  3rd Qu.:2020-11-17 12:00:00.00   3rd Qu.:3.730   3rd Qu.:15.0      
    ##  Max.   :2023-06-29 00:00:00.00   Max.   :5.620   Max.   :20.0      
    ##  plastic_bottles  polystyrene   cigarette_butts  glass_bottles   
    ##  Min.   : 210    Min.   :  48   Min.   :   900   Min.   :  0.00  
    ##  1st Qu.:1000    1st Qu.: 555   1st Qu.:  3900   1st Qu.: 10.00  
    ##  Median :1900    Median :1160   Median :  6500   Median : 18.00  
    ##  Mean   :1979    Mean   :1558   Mean   : 19833   Mean   : 21.62  
    ##  3rd Qu.:2780    3rd Qu.:2400   3rd Qu.: 24000   3rd Qu.: 30.00  
    ##  Max.   :5960    Max.   :6540   Max.   :310000   Max.   :110.00  
    ##   plastic_bags       wrappers    homes_powered      trash          
    ##  Min.   :  24.0   Min.   : 180   Min.   : 0.00   Length:584        
    ##  1st Qu.: 290.0   1st Qu.: 750   1st Qu.:40.62   Class :character  
    ##  Median : 635.0   Median :1100   Median :51.50   Mode  :character  
    ##  Mean   : 916.8   Mean   :1416   Mean   :47.28                     
    ##  3rd Qu.:1242.0   3rd Qu.:1980   3rd Qu.:60.33                     
    ##  Max.   :3750.0   Max.   :5085   Max.   :93.67                     
    ##   sports_balls  
    ##  Min.   : 0.00  
    ##  1st Qu.: 6.00  
    ##  Median :11.00  
    ##  Mean   :13.17  
    ##  3rd Qu.:18.25  
    ##  Max.   :56.00

In this dataset we have the variables dumpster, month, year, date,
weight_tons, volume_cubic_yards, plastic_bottles, polystyrene,
cigarette_butts, glass_bottles, plastic_bags, wrappers,
homes_powered,sports_balls, and trash (to specify from which dataset).
There are a total of 845 observations (rows) and 15 columns without
omitted data and a total of 584 rows (observations) and 15 columns with
omitted data. The datasheets were individually imported, in mister trash
I mutated the year and same for the rest due to years being considered
as a character in one dataset and the others as numeric so I converted
them all to numeric and get the mean years, committed data is 2018 and
non- omitted is 2019. I also cleaned the names for reasonable variable
names and mutated again to create a variable name to identify which
dataset the trash is from.

``` r
total_weight_prof_omit =  trash_wheel_tidy_omit %>% 
                     filter(trash == "professor_trash") %>% 
                     summarise(total_weight = sum(weight_tons, na.rm = TRUE))

print(total_weight_prof_omit)
```

    ## # A tibble: 1 × 1
    ##   total_weight
    ##          <dbl>
    ## 1            0

``` r
#with omitted data total weight is 0 because professor_trash is not in this dataset with omitted data for removing info that does not have trash specific data.


total_weight_prof =  trash_wheel_tidy %>% 
                     filter(trash == "professor_trash") %>% 
                     summarise(total_weight = sum(weight_tons, na.rm = TRUE))

print(total_weight_prof)
```

    ## # A tibble: 1 × 1
    ##   total_weight
    ##          <dbl>
    ## 1         210.

``` r
total_cigs_gwn =  trash_wheel_tidy %>% 
                     filter(trash == "gwynnda_trash", year == 2022, month == "June") %>% 
                     summarise(cigarette_butts = sum(cigarette_butts, na.rm = TRUE))
print(total_cigs_gwn)
```

    ## # A tibble: 1 × 1
    ##   cigarette_butts
    ##             <dbl>
    ## 1               0

- The total weight of trash collected by Professor trash wheel was
  210.11 tons (without entire binded dataset omitted). With the omitted
  dataset professor trash collected 0 tons.
- In the month of June 2022 Gwynnda collected 0 cigarette butts.

## Problem 3

``` r
bakers_df = 
  read_csv("./data/bakers.csv", na = c("NA", ".", "")) %>% 
  janitor::clean_names() %>% 
  separate(baker_name, into = c("first_name", "last_name"), sep = " ") %>% 
  select(- last_name) %>% 
  rename(bakers = first_name)
```

    ## Rows: 120 Columns: 5
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (3): Baker Name, Baker Occupation, Hometown
    ## dbl (2): Series, Baker Age
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
bakes_df = 
  read_csv("./data/bakes.csv", na = c("NA", ".", "")) %>% 
  janitor::clean_names() %>% 
  rename(bakers = baker)
```

    ## Rows: 548 Columns: 5
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (3): Baker, Signature Bake, Show Stopper
    ## dbl (2): Series, Episode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
results_df = 
  read_csv("./data/results.csv", skip = 3, col_names = FALSE,na = c("NA", ".", "")) %>% 
  janitor::clean_names() %>% 
  rename(series = x1,episode = x2, baker = x3, technical = x4, result = x5, ) %>% 
  rename( bakers = baker) 
```

    ## Rows: 1136 Columns: 5
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (2): X3, X5
    ## dbl (3): X1, X2, X4
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Merging the datasets

``` r
# checking for discrepancy 

anti_join(bakers_df, bakes_df, by = join_by(bakers))
```

    ## # A tibble: 23 × 5
    ##    bakers series baker_age baker_occupation               hometown     
    ##    <chr>   <dbl>     <dbl> <chr>                          <chr>        
    ##  1 Alice      10        28 Geography teacher              Essex        
    ##  2 Amelia     10        24 Fashion designer               Halifax      
    ##  3 Antony      9        30 Banker                         London       
    ##  4 Briony      9        33 Full-time parent               Bristol      
    ##  5 Dan         9        36 Full-time parent               London       
    ##  6 Dan        10        32 Support worker                 Rotherham    
    ##  7 Helena     10        40 Online project manager         Leeds        
    ##  8 Henry      10        20 Student                        Durham       
    ##  9 Imelda      9        33 Countryside recreation officer County Tyrone
    ## 10 Jamie      10        20 Part-time waiter               Surrey       
    ## # ℹ 13 more rows

``` r
anti_join(bakers_df, results_df, by = c("bakers"))
```

    ## # A tibble: 1 × 5
    ##   bakers series baker_age baker_occupation hometown    
    ##   <chr>   <dbl>     <dbl> <chr>            <chr>       
    ## 1 Jo          2        41 Housewife        Ongar, Essex

``` r
GBB_merged = 
  full_join(bakers_df, bakes_df, results_df, by = "bakers", relationship = "many-to-many")


GBB_merged_er = 
  left_join(bakers_df, bakes_df, by = "bakers")  #many to many
```

    ## Warning in left_join(bakers_df, bakes_df, by = "bakers"): Detected an unexpected many-to-many relationship between `x` and `y`.
    ## ℹ Row 1 of `x` matches multiple rows in `y`.
    ## ℹ Row 2 of `y` matches multiple rows in `x`.
    ## ℹ If a many-to-many relationship is expected, set `relationship =
    ##   "many-to-many"` to silence this warning.

## problem 3, part 2

``` r
views = 
  read_csv("./data/viewers.csv",na = c("NA", ".", ""))  %>% 
  janitor::clean_names() %>% 
  rename( season_1 = series_1, season_2 = series_2, season_3 = series_3, season_4 = series_4, season_5 = series_5, season_6 = series_6, season_7 = series_7, season_8 = series_8, season_9 = series_9, season_10 = series_10) %>% 
  head(10)
```

    ## Rows: 10 Columns: 11
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (11): Episode, Series 1, Series 2, Series 3, Series 4, Series 5, Series ...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
mean(pull(views, season_1), na.rm = TRUE)
```

    ## [1] 2.77

``` r
mean(pull(views, season_5), na.rm = TRUE)
```

    ## [1] 10.0393

- The average viewership in season 1 was 2.77
- The average viewership in season 5 was 10.0393
